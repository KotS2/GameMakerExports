/// Object : obj_usey_table_2 | Draw_0




// Sprite bilgileri
var spr = sprite_index;
if (!sprite_exists(spr)) exit;
var img = image_index mod max(1, sprite_get_number(spr));

// --- En yakÄ±n 2 Ä±ÅŸÄ±ÄŸÄ± bul ---
dists[0]   = 999999;
dists[1]   = 999999;
nearest[0] = noone;
nearest[1] = noone;

with (obj_light) {
    var d = point_distance(other.x, other.y, x, y);
    if (d < other.dists[0]) {
        other.dists[1] = other.dists[0];
        other.nearest[1] = other.nearest[0];
        other.dists[0] = d;
        other.nearest[0] = id;
    }
    else if (id != other.nearest[0] && d < other.dists[1]) {
        other.dists[1] = d;
        other.nearest[1] = id;
    }
}

// --- Scale (sabit, perspektif yok) ---
var scale = 2.0;

// --- 2 Ä±ÅŸÄ±k iÃ§in gÃ¶lge Ã§iz (Player sistemi) ---
for (var i = 0; i < 2; i++) {
    var L = nearest[i];
    if (L != noone) { // Ä±ÅŸÄ±k varsa Ã§iz
        // ðŸ”‘ Player kodundaki AYNI sistem
        var dir_light  = point_direction(x, y, L.x, L.y);
        var dir_shadow = (dir_light + 90) mod 360;
        
        // ðŸ”‘ Flip: scale_x cos(angle) ile
        var shadow_scale_x = cos(degtorad(dir_shadow)) * scale;
        var shadow_scale_y = 1.5 * scale; // player'daki gibi
        
        // ðŸ”‘ Sabit opacity (player'daki gibi)
        var shadow_alpha = 0.35;
        
        // --- GÃ¶lge Ã§iz (player'daki gibi) ---
        draw_sprite_ext(
            spr, img,
            x,                    // x pozisyonu
            y,              // y + 20 (zemine bastÄ±r)
            shadow_scale_x,      // cos() ile flip
            shadow_scale_y,      // uzatÄ±lmÄ±ÅŸ y
            dir_shadow,          // dÃ¶ndÃ¼rÃ¼lmÃ¼ÅŸ
            c_black,             // siyah gÃ¶lge (debug iÃ§in c_red yapabilirsiniz)
            shadow_alpha         // ÅŸeffaflÄ±k
        );
        
        // --- Debug (player'daki gibi) ---
        draw_set_color(i == 0 ? c_lime : c_aqua);
        draw_line(L.x, L.y, x, y);
        draw_text(x + 40, y - 20 - i * 15,
            "Light " + string(i+1) +
            " dir=" + string(round(dir_shadow)) + "Â°" +
            " cos=" + string_format(shadow_scale_x,1,2));
    }
}

// --- Objeyi Ã§iz ---
draw_self();"
/// Sabit obje gÃ¶lge Ã§izimi (Player kodunun aynÄ±sÄ±, perspektifsiz)

// Sprite bilgileri
var spr = sprite_index;
if (!sprite_exists(spr)) exit;
var img = image_index mod max(1, sprite_get_number(spr));

// --- En yakÄ±n 2 Ä±ÅŸÄ±ÄŸÄ± bul ---
dists[0]   = 999999;
dists[1]   = 999999;
nearest[0] = noone;
nearest[1] = noone;

with (obj_light) {
    var d = point_distance(other.x, other.y, x, y);
    if (d < other.dists[0]) {
        other.dists[1] = other.dists[0];
        other.nearest[1] = other.nearest[0];
        other.dists[0] = d;
        other.nearest[0] = id;
    }
    else if (id != other.nearest[0] && d < other.dists[1]) {
        other.dists[1] = d;
        other.nearest[1] = id;
    }
}

// --- Scale (sabit, perspektif yok) ---
var scale = 2.0;

// --- 2 Ä±ÅŸÄ±k iÃ§in gÃ¶lge Ã§iz (Player sistemi) ---
for (var i = 0; i < 2; i++) {
    var L = nearest[i];
    if (L != noone) { // Ä±ÅŸÄ±k varsa Ã§iz
        // ðŸ”‘ Player kodundaki AYNI sistem
        var dir_light  = point_direction(x, y, L.x, L.y);
        var dir_shadow = (dir_light + 90) mod 360;
        
        // ðŸ”‘ Flip: scale_x cos(angle) ile
        var shadow_scale_x = cos(degtorad(dir_shadow)) * scale;
        var shadow_scale_y = 1.5 * scale; // player'daki gibi
        
        // ðŸ”‘ Sabit opacity (player'daki gibi)
        var shadow_alpha = 0.35;
        
        // --- GÃ¶lge Ã§iz (player'daki gibi) ---
        draw_sprite_ext(
            spr, img,
            x,                    // x pozisyonu
            y,              // y + 20 (zemine bastÄ±r)
            shadow_scale_x,      // cos() ile flip
            shadow_scale_y,      // uzatÄ±lmÄ±ÅŸ y
            dir_shadow,          // dÃ¶ndÃ¼rÃ¼lmÃ¼ÅŸ
            c_black,             // siyah gÃ¶lge (debug iÃ§in c_red yapabilirsiniz)
            shadow_alpha         // ÅŸeffaflÄ±k
        );
        
        // --- Debug (player'daki gibi) ---
        draw_set_color(i == 0 ? c_lime : c_aqua);
        draw_line(L.x, L.y, x, y);
        draw_text(x + 40, y - 20 - i * 15,
            "Light " + string(i+1) +
            " dir=" + string(round(dir_shadow)) + "Â°" +
            " cos=" + string_format(shadow_scale_x,1,2));
    }
}

// --- Objeyi Ã§iz ---
draw_self();